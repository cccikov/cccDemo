<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>每日优鲜</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <div class="swiper-container" id="page">
        <div class="swiper-wrapper">
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">

                            <div class="swiper-container banner">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide">
                                        <img src="uploads/banner1.jpg">
                                    </div>
                                    <div class="swiper-slide">
                                        <img src="uploads/banner2.jpg">
                                    </div>
                                    <div class="swiper-slide">
                                        <img src="uploads/banner3.jpg">
                                    </div>
                                </div>
                                <div class="swiper-pagination">
                                </div>
                            </div>

                            <div class="img">
                                <img src="images/index1.png">
                                <img src="images/hot.png">
                            </div>
                            <ul class="img">
                                <li>
                                    <img src="uploads/product1.png">
                                </li>
                                <li>
                                    <img src="uploads/product2.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                            </ul>
                            <div class="img">
                                <img src="images/bottom.png">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">

                            <div class="swiper-container banner">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide">
                                        <img src="uploads/banner1.jpg">
                                    </div>
                                    <div class="swiper-slide">
                                        <img src="uploads/banner2.jpg">
                                    </div>
                                    <div class="swiper-slide">
                                        <img src="uploads/banner3.jpg">
                                    </div>
                                </div>
                                <div class="swiper-pagination">
                                </div>
                            </div>
                            <div class="img">
                                <img src="images/hot.png">
                            </div>
                            <ul class="img">
                                <li>
                                    <img src="uploads/product1.png">
                                </li>
                                <li>
                                    <img src="uploads/product2.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                                <li>
                                    <img src="uploads/product3.png">
                                </li>
                                <li>
                                    <img src="uploads/product4.png">
                                </li>
                                <li>
                                    <img src="uploads/product5.png">
                                </li>
                            </ul>
                            <div class="img">
                                <img src="images/bottom.png">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide3</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide4</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide5</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide6</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide7</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide8</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide9</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide10</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide11</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide12</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide13</div>
                    </div>
                </div>

            </div>
            <div class="swiper-slide slidepage">

                <div class="swiper-container scroll">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide slidescroll">slide14</div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="js/swiper.min.js"></script>
    <script type="text/javascript">
        var pageSwiper = new Swiper('#page', {
            watchSlidesProgress: true, // 开启这个参数来计算每个slide的progress(进度、进程)，Swiper的progress无需设置即开启。
            resistanceRatio: 0,
            on: {
                touchMove: function() { // 手指触碰Swiper并滑动（手指）时执行，接受touchmove事件作为参数。此时slide不一定会发生移动，比如你手指的移动方向和swiper的切换方向垂直时。
                    // 改变 nav 的颜色
                    progress = this.progress // 每个slide的progress
                    // 粉色255,72,145 灰色51,51,51
                    for (i = 0; i < this.slides.length; i++) {
                        slideProgress = this.slides[i].progress
                        if (Math.abs(slideProgress) < 1) {
                            r = Math.floor((255 - 51) * (1 - Math.pow(Math.abs(slideProgress), 2)) + 51)
                            g = Math.floor((72 - 51) * (1 - Math.pow(Math.abs(slideProgress), 2)) + 51)
                            b = Math.floor((145 - 51) * (1 - Math.pow(Math.abs(slideProgress), 2)) + 51)
                        }
                    }
                },
                transitionStart: function() {
                    console.log("触发transitionStart"); // 就是放手后 , swiper开始自动滑动回到对应格子的时候触发
                    activeIndex = this.activeIndex
                    activeSlidePosition = navSwiper.slides[activeIndex].offsetLeft
                    //释放时导航粉色条移动过渡
                    bar.transform('translateX(' + activeSlidePosition + 'px)')
                    //释放时文字变色过渡
                    navSwiper.slides.eq(activeIndex).find('span').transition(tSpeed)
                    navSwiper.slides.eq(activeIndex).find('span').css('color', 'rgba(255,72,145,1)')
                    if (activeIndex > 0) {
                        navSwiper.slides.eq(activeIndex - 1).find('span').transition(tSpeed)
                        navSwiper.slides.eq(activeIndex - 1).find('span').css('color', 'rgba(51,51,51,1)')
                    }
                    if (activeIndex < this.slides.length) {
                        navSwiper.slides.eq(activeIndex + 1).find('span').transition(tSpeed)
                        navSwiper.slides.eq(activeIndex + 1).find('span').css('color', 'rgba(51,51,51,1)')
                    }
                    //导航居中
                    navActiveSlideLeft = navSwiper.slides[activeIndex].offsetLeft //activeSlide距左边的距离

                    navSwiper.setTransition(tSpeed)
                    if (navActiveSlideLeft < (clientWidth - parseInt(navSlideWidth)) / 2) {
                        navSwiper.setTranslate(0)
                    } else if (navActiveSlideLeft > navWidth - (parseInt(navSlideWidth) + clientWidth) / 2) {
                        navSwiper.setTranslate(clientWidth - navWidth)
                    } else {
                        navSwiper.setTranslate((clientWidth - parseInt(navSlideWidth)) / 2 - navActiveSlideLeft)
                    }

                },
            }
        });
    </script>
</body>
</html>